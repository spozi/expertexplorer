<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
  <link href="http://fonts.cdnfonts.com/css/product-sans" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"
    integrity="sha256-+8RZJua0aEWg+QVVKg4LEzEEm/8RFez5Tb4JBNiV5xA=" crossorigin="anonymous"></script>
  <title>IU2E: Intelligent UUM Expert Explorer</title>
  <style>
    body {
      font-family: 'Product Sans', sans-serif;
    }

    .slidecontainer {
      width: 100%;
    }

    .header {
      padding: 60px;
      text-align: center;
      color: white;
      font-size: 60px;
      /* background-image: url('mac.jpg');
            background-repeat: no-repeat;
            background-size: auto; */
    }

    @media screen and (min-width: 1920px) {
      body {
        max-width: 60%;
        margin: auto;
      }
    }

    @media screen and (min-width: 601px) {
      .form-container {
        max-width: 500px;
        margin: auto;
      }
    }

    textarea {
      resize: none;
    }
  </style>
</head>

<body class="bg" style="text-align: w3-center;">

  <div class="w3-container w3-padding-64 form-container">
    <div class=" w3-round w3-padding w3-white w3-center">
      <p style="font-family: 'Product Sans', sans-serif;font-size:80px;margin-bottom:5px;"><b>IU2E</b>
      </p>
      <p style="font-family: 'Product Sans', sans-serif;font-size:18px;margin-bottom:5px;margin-top:1px;"><b>Intelligent
          UUM Expert Explorer</b>
      </p>
      <form class="w3-container" method="POST" onsubmit="showHide()">
        <textarea class="w3-input w3-border w3-round-xxlarge" name="query" id="txtArea" rows="10" cols="70"
          placeholder="This system works better with title or summary, instead of keywords. Enter your long text query... (e.g. Machine learning in healthcare has been used extensively for .....)"
          required></textarea>
        <!-- <p>
          <input class="w3-input w3-border w3-round-xxlarge" type="text" name="query"
            placeholder="Enter your keywords... (e.g. Machine learning in healthcare)" required>
        </p> -->
        <label>Relevancy:</label> <span id="idthreshold"></span>
        <div class="slidecontainer">
          <input type="range" min="0.1" step="0.01" max="1" value="0.6" class="slider" id="myRange" name="threshold">
          </p>
        </div>
        <div class="w3-center">
          <button class="w3-btn w3-light-gray w3-round" id="submit" type="submit">Search</button>
          <button class="w3-btn w3-light-gray w3-round" type="reset">Reset</button>
        </div>
      </form>
    </div>
  </div>


  {% if output_data %}
  <div class="" id="hidden_div">
    <table class="w3-table w3-striped w3-bordered">
      <thead>
        <tr>
          <th>No</th>
          <!-- <th>Photo</th> -->
          <th>Expert Name</th>
          <!-- <th>Expertise Score</th> -->
          <!-- <th>Graph</th> -->
          <th>Total Related Publications</th>
          <th>Total Publications</th>
          <th>Related Publications</th>
          <!-- <th>Semantic Trend</th> -->
        </tr>
      </thead>

      {% for k,v in output_data.items() %}
      {% if (v['Similarity_Score'] > 0) %}
      <tr>
        <td>{{loop.index0 +1 }}</td>
        <!-- <td class="laligne"><img id="bigpic" src="{{ v['Photos'] }}" alt="candidate image" width="100" height="100"> -->
        </td>
        <td class="lalignc">{{ k }}</td>
        <!-- <td class="lalignc">{{'%.2f'|format(v['Similarity_Score']|float) }}</td> -->
        <td class="lalignc">{{ v['Total_Related_Publications'] }}</td>
        <td class="lalignc">{{ v['Total_Publications'] }}</td>
        <td class="lalignc">
          <button onclick="document.getElementById('{{ loop.index0 +1 }}').style.display='block'"
            class="w3-button w3-black">Details</button>
          <!-- {% for t in v['Related_Publications'] %}
          <ul>
            <li>{{t}}</li>
          </ul>
          {% endfor %} -->
        </td>
        <div id='{{ loop.index0 +1 }}' class="w3-modal w3-margin-bottom">
          <div class="w3-card w3-margin w3-padding">
            <div class="w3-modal-content">
              <header class="w3-container w3-blue">
                <span onclick="document.getElementById('{{ loop.index0 +1 }}').style.display='none'"
                  class="w3-button w3-display-topright">&times;</span>
                <h2>Related Publications</h2>
              </header>
              <ol>
                {% for t in v['Related_Publications'] %}
                <li>{{t}}</li>
                {% endfor %}
              </ol>
              <br>
            </div>
          </div>
        </div>
        <!-- <td class="lalignc">
          {% set gaid = "ga" + (loop.index0 +1)|string %}
          <canvas id='{{ gaid }}' width="300" height="300"></canvas>
          <script>
            var ctx = document.getElementById('{{gaid}}').getContext('2d');
            console.log('{{gaid}}');
            var lineChart = new Chart(ctx, {
              type: "line",
              data: {
                labels: ['2018', '2019', '2020', '2021', '2022'],
                datasets: [
                  {
                    label: "Average semantic value",
                    data: ['{{v["average_similarity_2018"]}}', '{{v["average_similarity_2019"]}}', '{{v["average_similarity_2020"]}}', '{{v["average_similarity_2021"]}}', '{{v["average_similarity_2022"]}}'],
                    // borderColor: 'red',
                    pointStyle: 'circle',
                    pointRadius: 10,
                    lineTension: 0.1
                  }
                ]
              },
              options: {
                responsive:false
              }
            });
        </script>
        </td> -->
      </tr>
      {% endif %}
      {% endfor %}
    </table>
  </div>
  {% else %}
  {% endif %}
</body>

<script>
  //Slider
  var slider = document.getElementById("myRange");
  var output = document.getElementById("idthreshold");
  output.innerHTML = 0.65;
  slider.oninput = function () {
    output.innerHTML = Number(slider.value).toFixed(2)
  }

  //Graph
  // function initializeChart(k){

    // var ctx = document.getElementById('{{gaid | safe}}').getContext('2d');
    // console.log('{{gaid | safe}}');
    // var lineChart = new Chart(ctx, {
    //   type: "line",
    //   data: {
    //     labels: ['2018', '2019', '2020', '2021'],
    //     datasets: [
    //       {
    //         label: "Average semantic value",
    //         data: [2, 3, 4, 5],
    //         // borderColor: Utils.CHART_COLORS.red,
    //         // backgroundColor: Utils.transparentize(Utils.CHART_COLORS.red, 0.5),
    //         // pointStyle: 'circle',
    //         pointRadius: 10,
    //         lineTension: 0.1
    //       }
    //     ]
    //   },
    //   options: {
    //     responsive:false
    //   }
    // });
  // };
  // set the dimensions and margins of the graph
  // var ctx = document.getElementsByName("semantic")
  // const data = {
  //   labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6'],
  //   datasets: [
  //     {
  //       label: 'Dataset',
  //       data: Utils.numbers({count: 6, min: -100, max: 100}),
  //       borderColor: Utils.CHART_COLORS.red,
  //       backgroundColor: Utils.transparentize(Utils.CHART_COLORS.red, 0.5),
  //       pointStyle: 'circle',
  //       pointRadius: 10,
  //       pointHoverRadius: 15
  //     }
  //   ]
  // };

</script>

</html>